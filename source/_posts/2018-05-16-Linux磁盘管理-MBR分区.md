---
title: 【Linux】Linux磁盘管理02 MBR分区
tags: Linux
abbrlink: 5a979475
date: 2018-05-06 14:04:59
---





硬件设备都是由Linux系统自动识别的，必须对硬盘进行分区、格式化、挂载后才能使用

分区的意义：http://www.cnblogs.com/personnel/p/4584926.html

Windows与Linux的磁盘使用流程

* Windows：分区-->格式化-->分配盘符
* Linux：分区-->格式化-->给每个分区起“设备文件名”-->分配挂载点



## MBR

MBR=主引导区记录。硬盘的0磁道的第一个扇区称为MBR，它的大小是512字节，而这个区域可以分为三个部分。第一部分为pre-boot区（预启动区），占446字节；第二部分是Partition table区（分区表），占64个字节，硬盘中分区有多少以及每一分区的大小都记在其中。第三部分是magic number，占2个字节，固定为55AA。



MBR是针对整个硬盘而言的，而引导扇区是对单个分区而言的。每个分区的第一扇区就是引导扇区：像MBR一样，引导扇区里包含了一些引导操作系统所需要的相关信息。如果引导扇区被破坏了是个非常严重的问题，那就意味着这个分区不能被访问，安装在这个分区上的操作系统也不能被启动。所以说修复引导是使得每一个分区都能被正确识别引导。





##MBR分区类型（所有系统都适用）：

#### 主分区

最多只能分4个，由硬盘的结构决定（硬盘分为一个个等大小的扇区，每个扇区512字节，其中446个字节用于记录启动信息， 剩下的64个字节进行分区表示，64个字节中每16个字节表示一个分区，所以最多只能表示4个分区，故而硬盘结构如果不变，主分区最多只能分4个）。每个主分区都有各自独立的引导块，可以用fdisk设定为启动区。

Windows下A、B作为软分区的盘符，C作为第一个主分区的盘符，所以最多还能分23个子分区。




####扩展分区

**一块硬盘中扩展分区只能有一个**

**主分区和扩展分区总数不能超过4个**

可以将一个主分区作为扩展分区，即三个主分区，一个扩展分区，总计4个分区；

**不能直接写入数据**，只能用作包含逻辑分区。

区分扩展分区和逻辑分区，是突破主分区只能有4个的最主要的方法。




#### 逻辑分区

可以有多个，没有独立的引导块，不能用fdisk设定为启动区。





## 设备文件名

Linux中一切皆文件，包括硬件、用户等。硬件的文件名即称作“硬件设备文件名”，硬件设备文件名作为硬件的标准称呼，是由Linux自动检测并分配的。硬件设备文件在目录中处于根目录（“/”代表根目录，最高级目录）下的dev文件夹（专用于放硬件设备文件）下，即“/dev”文件夹下。

#### 分区的设备文件名分配规则

hd代表IDE接口，sd代表SCSI接口或SATA接口；
a代表第一块硬盘，如有多块硬盘b代表第二块硬盘，c代表第三块硬盘，以此类推；
1代表一块硬盘上的第一个分区，2代表此硬盘的第二个分区，3代表此硬盘第三个分区，以此类推，其中1234编号只能代表主分区或扩展分区，逻辑分区的编号从5开始分配，最大分区编号16
/dev/sda1 第一块SATA接口硬盘的第一个分区

![](http://ow3dy62zt.bkt.clouddn.com/IMG28.jpg)


#### 挂载点

Windows中使用字母标识符来指定在这个分区上的文件和目录，而Linux中使用目录作为挂载点（盘符）
绝大多数目录都可以作为挂载点（部分必须和根目录放在同一个分区的目录除外，否则将导致系统不能启动）包括你手工创建的目录。





##Linux 分区

####必须分区：

根分区 /（挂载点根目录，根目录中要保存其他所有数据，根目录如果没有硬盘空间，根下的很多数据将没有地方存放）
swap分区（交换分区，可理解为虚拟内存， 当真实内存不足时，可将swap分区中的硬盘空间作为内存使用，如果内存小于等于4GB，推荐swap分配内存的两倍，若内存大于4GB，建议swap空间与内存相等，不需要挂载点，swap分区不是给用户看的，是系统直接调用的所以无挂载点）

注：启动分区/boot需不需要创建要看实际情况，
需要使用LVM时，由于/boot分区不支持lvmfs，所以要单独创建，这个目录是系统文件，一般不会动，但不要太小，如果升级内核可能就满了。
个人使用没有必要





#### 使用 "fdisk"命令进行硬盘分区

```
fdisk /dev/sdb 
进入sdb硬盘分区模式
输入m，查看命令帮助信息

新建分区
输入n，给硬盘添加一个新的分区
输入p，主分区
输入e，扩展分区，扩展分区不能直接使用，需要添加逻辑分区
输入l，扩展分区只能有一个，不能再分扩展分区了，所以显示的是逻辑分区，5代表分区的编号从5开始
给分区指定编号，1-4是预留给主分区或者扩展分区的
Partition number( 1-4,defautl 1):
给这个分区指定扇区发起始和终止位置
扇区的起始位置： First sector (2048 - 16777215，default 2048):不输入默认2048
扇区的终止位置：Last sector,+sectors or +size{K,M,G}{2048-16777215,default 16777215}:3000M
Command(m for help):输入p查看已经分好的区
Command(m for help):输入n 继续添加分区

删除分区： 输入d，随后输入删除的分区号
逻辑分区是在拓展分区之内的，如果删除的拓展分区，随之而然的逻辑分区也被删除

写入分区：输入w，直接就是保存并生效了；
```




<br/>

参考：

* https://shengbao.org/691.html
* http://blog.51cto.com/13323775/2053921


---
title: Linux查看用户登录时间及历史命令
tags: Linux
abbrlink: 2edd2f82
date: 2018-05-16 20:34:14
---

```
who
#查看当前登录用户信息：用户名、终端类型、登陆日期以及远程主机
```

```
users
#当前登录的用户
```

```
history
#查看命令历史
$HOME/.bash_history：每个用户都有一份命令历史记录
```

```
last
#查看用户登录历史
#此命令会读取 /var/log/wtmp 文件，/var/log/btmp可以显示远程登陆信息。 
#last默认打印所有用户的登陆信息
last 用户名
#打印某个用户的登陆信息
选项： 
-x：显示系统开关机以及执行等级信息 
-a：将登陆ip显示在最后一行 
-f ：读取特定文件，可以选择 -f /var/log/btmp文件 
-d：将IP地址转换为主机名 
-n：设置列出名单的显示列数 
-t：查看指定时间的用户登录历史 
例如： 
last -t 20150226160404 
显示这个时间戳之前的登陆历史
```

```
lastlog
#查看所有用户最近一次登录历史
#命令将读取 /var/log/lastlog 文件，用户排列顺序按照 /etc/passwd 中的顺序
选项： 
-u：查看某个用户的最后一次登陆历史 
例如： lastlog -u test 
查看用户test的登陆历史 

-t：查看最近几天之内的用户登录历史 
例如： lastlog -t 1 
查看最近1天之内的登陆历史

-b：查看指定天数之前的用户登录历史 
例如： lastlog -b 60 
查看60天之前的用户登录历史
```

```
ac
根据/var/log/wtmp文件中的登陆和退出时间报告用户连接的时间（小时），默认输出报告总时间 
-p：显示每个用户的连接时间 
-d：显示每天的连接时间 
-y：显示年份，和-d配合使用
```

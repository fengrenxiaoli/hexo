---
title: 计算机网络-物理层
tags: 计算机网络
abbrlink: b709c2f1
date: 2018-06-19 21:09:35
---


## 物理层的基本概念
物理层解决如何在连接各种计算机的 **传输媒体**（光纤、无线等）上传输 **数据比特流**，而不是指具体的传输媒体
物理层的主要任务描述为：确定传输媒体的接口的一些特性，即：
1. **机械特性**：例如接口形状，大小，引线数目
2. **电气特性**：例如规定电压范围（-5V到+5V）
3. **功能特性**：例如规定-5V表示0，+5V表示1
4. **过程特性**：也称为规程特性，规定建立连接时各个相关部件的工作步骤

<!--more-->
<br>
## 数据通信的基础知识

### 数据通信模型
![](/img/IMG72.png)
广域网：公共电话网
局域网：通过交换机直接使用数字比特流


数据通信不只包括计算机通信，也包括电视、电话、传真等通信方式

通信的目的是传送消息
- 数据data：运送消息的实体
- 信号signal：数据的电气或电磁表现
    - 模拟信号：代表消息的参数的取值是连续的
    - 数字信号：代表消息的参数的聚会是离散的
- 码元code：在使用时间域的波形表示数字信号时，则代表不同离散数值的基本波形就成为码元(在波形中单个0和1就代表码元)，在数字通信中常常用时间间隔相同的符号来表示一个二进制数字，这样的时间间隔内的信号称为二进制码元，而这个间隔被称为码元长度，1码元可以携带nbit的信息量

![](/img/IMG73.png)
右图表示一码元可以携带3bit的信息，可以通过不同的电压表示 

### 信道

信道一般表示向一个方向传送信息的媒体（A到B是一条，B到A是一条），所以平常的通信线路往往包含一条发送信息的信道和一条接收信息的信道
- **单向通信**（单工通信）：只能有一个方向的通信而没有反方向的交互，电视、收音机
- **双向交替通信**（半双工通信）：通信的双方都可以发送信息，但不能双方同时发送（当然也不能同时接收），对讲机
- **双向同时通信**（全双工通信）：通信的双方可以同时发送和接收信息



### 基带信号和带通信号、调制
- 基带信号/baseband/基本频带信号：来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。基带信号就是发出的直接表达了要传输的信息的信号，比如我们说话的声波就是基带信号
- 带通信号/band pass：把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输（即仅在一段频率范围内能够通过信道）

基带信号传播衰减太严重，这就是为什么需要带通信号的原因，带通信号能够在空气中传播较远的范围

由于在传输距离较近时，基带信号的衰减不大，信号内容不会发生变化，当在较近范围内传输时计算机网络会采用基带传输方式。如从计算机到监视器、打印机等外设的信号就是基带信号

把基带信号调制为带通信号的常见方式有三种：
1. **调幅**（AM）：载波的振幅随基带数字信号而变化
2. **调频**（FM）：载波的频率随基带数字信号而变化
3. **调相**（PM）：载波的初始相位随基带数字信号而变化


![](/img/IMG74.png)



### 常用编码

1. 单极性不归零码：只使用一个电压值，用高电平表示1，没电压表示0
2. 双极性不归零码：用正电平和负电平分别表示二进制数据的1和0，正负幅值相等
3. 单极性归零码（RZ）：即是高电平和零电平分别表示二进制码1和0，而且在发送码1时高电平在整个码元期间T只持续一段时间t，其余时间返回零电平
4. 双极性归零码：正负零三个电平，信号本身携带同步信号
5. 曼彻斯特编码
6. 差分曼彻斯特编码

单极性和双极性：区别在于0用没电压表示还量用负电平表示 
归零和不归零：每一bit结束时是否归零，不归零这种方式无法区分到底是0还是没有信号
![](/img/IMG75.png)



**曼彻斯特编码**

![](/img/IMG76.png)
采样两次是指每bit开始一次，结束一次，比较开始和结束是从高电平转低电平还是从低电平转高电平

**差分曼彻斯特编码**
![](/img/IMG77.png)
注意，看的是bit与bit之间是否有跳变，不是bit内
![](/img/IMG78.png)



### 信道极限容量
有失真，但可以识别
![](/img/IMG79.png)


失真大，无法识别
![](/img/IMG80.png)


**奈氏准则**
1924年，奈奎斯特（Nyquist)就推导出了著名的奈氏准则，他给出了在 **假定的理想条件**下，为了避免码间串扰，码元的传输速率的上限值。
在任何信道中，**码元传输的速率是有上限的**，否则就会出现 **码间串扰**的问题，使接收端对码元的识别成为不可能。
如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以使用更高的速率传送码元而不出现码间串扰。


**香农理论**
在奈氏准则的基础上，香农用信息论的理论推导出了 **带宽受限**且有 **噪声干扰**的信道的极限、**无差错的信息传输速率**。

信道的极限信息传输速率C可表达为：`C=W lg(1+S/N)/lg2 b/s`
- W为信道的带宽（以Hz为单位）
- S为信道内所传信号的平均功率
- N为信道内部的高斯噪声功率
- S/N为信噪比

1. 信道的带宽或信道中的**信噪比越大**，则信息的**极限传输速率就越高**
2. 只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输
3. 若信道带宽 W 或信噪比`S/N`没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率C也就没有上限
4. 实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少

![](/img/IMG81.png)



<br>
## 物理层下面的传输媒体
### 导向传输媒体
导向传输媒体中，电磁波沿着固体媒体传播

- 双绞线
    - 屏蔽双绞线STP：屏蔽网线，优点屏蔽性好，抗干扰能力强。缺点价格昂贵，与UTP相比，直径较大，更重以及不易安装
    - 无屏蔽双绞线UTP：非屏蔽网线，优点是价格便宜，直径较小，易安装。缺点是抗干扰能力较弱
- 同轴电缆
    - 50Ω 同轴电缆用于数字传输，由于多用于基带传输，也叫基带同轴电缆
    - 75Ω 同轴电缆用于模拟传输，即宽带同轴电缆
- 光缆

![](/img/IMG82.png)



#### 双绞线
LAN网络中最常见的数据传输铜介质是双绞线。铜介质优点是可以非常好的传导电信号，缺点是易受外界干扰而产生畸形和信号衰减，导致长距离传输过程中能量损失。为解决上述不足，提高数据传输稳定性，IEEE制定了LAN线缆标准，主要有两种：屏蔽双绞线(STP)和非屏蔽双绞线(UTP)。

所谓双绞线，实际上是将线缆中细铜缆成对出现。之所以这样设计，原因是在数据传输过程中，电线中电流流过时产生电磁场，干扰线缆中其它细铜缆。为解决这个问题，将电缆中细铜线 **两两配对**，使得传输过程中两两配对的细铜缆产生的 **电磁场互相抵消**，减少串扰。

随着UTP单位长度中的双绞次数的增多，抗干扰能力也得到加强,是目前使用最广泛的双绞线，而STP因需要接地，安装不易反而没有得到大范围应用。在实际工作中可以察看双绞线的双绞频率判断双绞线的伪劣。

##### 双绞线线缆引脚顺序
双绞线要正常稳定工作，需要在两端将细铜缆按一定的顺序接在连接器中。双绞线使用的连接器标准是 **RJ-45连接器**。要理解线缆的引脚顺序本质，实际上需要理解硬件设备接收发送电信号的规则：
1. 以太网设备使用一对铜细缆来传输数据
2. 以太网设备使用一对铜细缆来接收数据
3. 以太网设备不能使用同一对铜细缆来同时传输和接收数据。

结论：**在以太网中，以太网设备需要使用两对细铜缆分别用来进行数据的接收和发送**。

 

理解了以上规则后，我们再来了解下不同的硬件设备用于发送和接收数据的工作规则：
1. 网卡NIC：1、2引脚发送数据，3、6引脚接收数据
2. 集线器：3、6引脚发送数据，1，2引脚接收数据
3. 交换机：3、6引脚发送数据，1，2引脚接收数据
4. 网桥：3、6引脚发送数据，1，2引脚接收数据
5. 路由器：1，2引脚发送数据，3，6引脚接收数据

 

了解了不同硬件设备的接收发送信号的引脚编号后，再看来直通线和交叉线的使用场景就会清晰很多。

以最常见的PC机与交换机通信为例
1. PC机网卡发送信号给交换机，对于NIC端是发送数据，NIC的发送引脚是1，2引脚，对于交换机是接收数据，参照上述规则，交换机接收数据使用的是1，2引脚。
2. 交换机发送信号到PC机网卡，对于交换机是发送数据，使用3，6引脚，对于NIC端是接收数据，同样使用3，6引脚。

所以PC机与交换机通过网线相连，用于通信的线缆1、2、3、6引脚两端顺序保持一致，简称直通线。
同理，PC机与集线器、网桥相连，也使用直通线。

结论：
**互相通信的网络设备使用的传输引脚规则一致时，使用交叉线**
**互相通信的网络设备使用的传输引脚规则不同时，使用直通线**

 

##### TIA/EIA-586A与TIA/EIA-586B引脚顺序

从上述双绞线线缆引脚顺序的描述中，可以看出两台设备要能正常通信，只需要根据具体设备发送和接收数据的工作规则来排列正确的引脚次序。比如说PC机与交换机通信，只要将网线两端的引脚顺序保持一致就可以，那么可以通信的引脚顺序组合有：8*7*6*5*4*3*2*1种可能性。为避免不同人员随意性的引脚顺序排列，TIA/EIA制定了两个网线引脚顺序标准，分别是`TIA/EIA-586A`与`TIA/EIA-586B`，强制要求所有的网线引脚顺序必须遵循以上两种标准之一。

TIA/EIA-586A引脚顺序：1-绿白 2-绿 3-橙白 4-蓝 5-蓝白 6-橙 7棕白 8棕
TIA/EIA-586B引脚顺序：1-橙白 2-橙 3-绿白 4-蓝 5-蓝白 6-绿 7棕白 8棕

观察586A和586B引脚顺序，实质上就是 **1，2引脚和3，6引脚互换了位置**，其它位置的引脚保持不变。
1、2、3、6是10M和100M网线使用的线路，1000M使用全部8根线
 

根据标准的586A和586B标准，再来明确一下直通线和交叉线的定义：
- 直通线：两端使用相同引脚顺序，同时使用586A标准或同时使用586B标准。用于不同类的网络设备连接，如电脑与交换机、交换机与路由器等。
- 交叉线：两端使用不同的引脚顺序，一端使用586A顺序，一端使用586B顺序，主要用于同类网络设备的连接，如交换机与交换机、电脑与电脑等。


当前大部分网络设备、网络终端的网线接口均支持 **自动翻转**功能。


#### 光纤
![](/img/IMG83.png)
![](/img/IMG84.png)
![](/img/IMG85.png)




### 非导向传输媒体
非导向传输媒体就是指 **自由空间**，其中的电磁波传输被称为无线传输
无线传输所使用的频段很广
短波通信主要是靠电离层的反射，但短波信道的通信质量较差
微波在空间主要是直线传播
    地面微波接力通信
    卫星通信

![](/img/IMG86.png)

### 物理层设备———集线器
工作范围：它在网络中只起信号放大和重发作用，其目的是扩大网络的传输范围，而 **不具备信号的定向传送能力**（不具备交换机所具有的MAC地址表，所以它发送数据时都是没有针对性的，而是采用广播方式发送。也就是说当它要向某节点发送数据时，不是直接把数据发送到目的节点，而是把数据包发送到与集线器相连的所有节点）
最大传输距离：100m
集线器是一个大的冲突域（带宽共用）



<br>
## 信道复用技术
![](/img/IMG87.png)

### 频分复用FDM Frequency Division Multiplexing
用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带
频分复用的所有用户在同样的时间占用不同的频率

![](/img/IMG88.png)
![](/img/IMG89.png)
![](/img/IMG90.png)
![](/img/IMG91.png)


### 时分利用TDM Time Division Multiplexing
时分复用是将时间划分为一段段等长的时分复用帧（TDM帧），每一个时分复用的用户在每个TDM帧中占用固定序号的时隙
每个用户所占用的时隙是周期性（其周期性就是TDM帧的长度对应的时间）
TDM信号也称为等时（isochronous)信号

时分复用的所有用户是在不同的时间占用同样的频带宽度

![](/img/IMG92.png)
![](/img/IMG93.png)
![](/img/IMG94.png)

#### 统计时分复用STDM Statistic TDM
时分复用可能会造成线路资源的浪费
使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的，所以出现了统计时分复用

![](/img/IMG95.png)
![](/img/IMG96.png)



### 波分复用WDM Wavelength Division Multiplexing
波分复用就是光的频分复用

![](/img/IMG97.png)
![](/img/IMG98.png)



<br>
## 数字传输系统
脉冲编码调制PCM最初是为了在电话局之间的中继线上传送多路的电话。由于历史的原因，PCM有两个互一兼容的标准，即北美24路PCM（简称为T1）和欧洲的30路PCM（简称为E1）。我国采用的是欧洲的E1标准。
E1的速率是 2.048Mb/s，而T1的速率是 1.544Mb/s
当需要有更高的数据率时，可采用复用的方法

PCM 是要把声音从 **模拟转换成数字信号**的一种技术，他的原理简单地说就是利用一个固定的频率对模拟信号进行采样，采样后的信号在波形上看就像一串连续的幅值不一的脉冲，把这些脉冲的幅值按一定的精度进行量化，这些量化后的数值被连续地输出、传输、处理或记录到存储介质中，所有这些组成了数字音频的产生过程。


![](/img/IMG99.png)

电话的采样采样频率通常为8000次/s，量化精度是 8bit（每一个波形/码元用8位二进制表示）
8000×8 = 64Kb/s
PCM产生的数字信号称为 **数字基带信号**

![](/img/IMG100.png)
![](/img/IMG101.png)


参考：
- https://blog.csdn.net/hanmengaidudu/article/details/78854264
- https://baike.baidu.com/item/PCM/1568054


<br>
## 宽带接入技术
究其本质，没有太多区别，它们都是接入网络（Access Network），先认证用户合法，分配 IP 地址等上网必备的参数，将用户电脑接入互联网 Internet。运营商在将用户接入网络的同时，启动用户流量统计/用户在线时长统计，以生成用户账单，用户掏钱。

但由于采用的传输介质（physical media）大不同，有模拟电话线、数字铜线、光纤，以及成帧方式的不同，有 PPP，PPPoE +PPP，IPoE，在上网速率上体现出数量级的差别，从模拟电话线 56Kbps，ISDN 144Kbps，ADSL 512Kbps-10Mbps，FTTH 2-1000Mbps。

### 拨号上网


#### 模拟线电话拨号
使用电话线，用户可以在自己的电脑上安装一个内置（插在电脑 PCI 插槽）modem，或外置（插在 RS-232 接口）modem官方的名字：调制解调器，民间的名字：猫！它负责将电脑的数字信号转换为可以在电话线上传输的模拟信号。在局端，也有对应的 modem，再将模拟信号转换为数字信号。



#### 数字线电话拨号 ISDN
此为数字线，所以不需要模数转换的 modem，提供 B +2D 接入方式，即一条 16Kbps 信令通道 B，两条各 64 Kbps 数据通道 D，可以一条线路打电话，同时另一条上网；也可以两条 D 通道都用于上网，即 64 + 64=128 Kbps 的上网带宽。

### xDSL方式

xDSL：用数字技术对现有的模拟电话用户线进行改造。标准模拟电话信号的频带限制在300～3400Hz的范围内，但用户线本身实际可通过的信号频率超过1MHz。xDSL就把0～4kHz低端频谱留给传统电话使用，而把原来没有被利用的高端频谱给用户上网使用。
- DSL：数字用户线路
- ADSL：不对称数字用户线路
- VDSL：甚高比特率数字用户线路
- R-ADSL：速率适应数字用户线
- IDSL：ISDN DSL
- HDSL：高速数字用户线
- SDSL：单线用户数字线

![](/img/IMG102.png)
![](/img/IMG103.png)


中间还是一根电话线，你这头是一个ADSL宽带猫，运营商机房那头是对应的宽带设备。


ADSL的特点
1. 上行和下行带宽做成不对称的
2. ADSL在用户线的两端各安装一个ADSL调制解调器
3. 我国目前采用的方案是离散多间调DMT（Discrete Multi-Tone）调制技术


**DMT技术**
DMT调制技术采用频分复用的方法，把40kHz以上一直到1.1MHz的高端频谱划分为许多的子信道，其中25个子信道用于上行信道，而249个子信道用于下行信道
每个子信道占据4kHz带宽，并使用不同的载波（即不同的音调）进行数字调制，这种做法相当于在一对用户线上使用许多小的调制解调器并行地传送数据

![](/img/IMG104.png)

Serial/parallel converter 串/并行转换

![](/img/IMG105.png)
![](/img/IMG106.png)


### HFC
光纤同轴混合网，Hybrid Fiber Coax

HFC网是在目前覆盖面很广的有线电视网CATV的基础上开发的一种居民宽带接入网。
HFC网除可传送CATV外，还提供电话、数据和其他宽带交互型业务。
现有的CATV网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。而HFC网则需要对CATV进行改造。

HFC的主要特点：
- HFC网的主干线路采用光纤。HFC网将原CATV网中的同轴电缆主干部分改换为光纤，并使用模拟光纤技术。在模拟光纤中采用光的振幅调制AM，这比使用数字光纤更为经济。模拟光纤从头端连接到光纤结点（fiber node），即光分配结点OND（Optical Distribution Node）。在光纤结点光信号被转换为电信号，在光纤结点以下就是同轴电缆。
- HFC网具有比CATV网更宽的频谱，且具有双向传输功能
- 每个家庭要安装一个用户接口盒

![](/img/IMG107.png)
![](/img/IMG108.png)
![](/img/IMG109.png)

HFC的优点
具有很宽的频带
能够利用已经有相当大的覆盖面的有线电视网


### FTTx
FTTx（光纤到……），这里字母x可代表不同意思
- 光纤到家FTTH（Fiber To The Home）：光纤一直铺设到用户家庭可能是居民接入网最后的解决方法（155Mb/s）
- 光纤到大楼FTTB（Fiber To The Building）：光纤进入大楼后就接入交换机，然后用电缆或双绞线分配到各用户
- 光纤到路边FTTC（Fiber To The Curb）：从路边到各用户可使用星形结构双绞线作为传输媒体（155Mb/s）





<br>



参考：
- http://blog.51cto.com/alligator/910667
- http://www.admin10000.com/document/3946.html
- https://www.zhihu.com/question/48988005